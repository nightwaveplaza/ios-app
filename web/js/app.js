"use strict";(self.webpackChunkapp_plaza=self.webpackChunkapp_plaza||[]).push([[773],{8328:function(t,e,n){n.d(e,{Oq:function(){return l},xx:function(){return m},m8:function(){return d},r:function(){return v},ZE:function(){return f},gw:function(){return p},xO:function(){return u},i7:function(){return c},EA:function(){return h}});n(2222);var s=n(9669),i=n.n(s),r=n(7869),o=i().create({baseURL:"https://api.plaza.one"});o.interceptors.request.use((function(t){return t.headers.Authorization="Bearer "+r.Z.state.token,t.headers["NP-User-Agent"]=r.Z.state.agent,t}));var a=o,c={get:function(){return a.get("status")},getOsd:function(){return a.get("status/on-screen-data")}},l={get:function(){return a.get("backgrounds")},random:function(){return a.get("backgrounds/random")}},u={get:function(t){return a.get("songs/".concat(t))}},d={get:function(t){return a.get("history/".concat(t))}},p={react:function(t){return a.post("reactions",{reaction:t})}},f={get:function(t,e){return a.get("ratings/".concat(t,"/").concat(e))}},v={get:function(t){return a.get("news/".concat(t))},latest:function(){return a.get("news/latest")}},h={get:function(){return a.get("user")},auth:function(t){return a.post("user/auth",t)},register:function(t){return a.post("user/register",t)},edit:function(t){return a.put("user",t)},reset:function(t){return a.post("user/reset",t)},confirmReset:function(t){return a.post("user/reset/confirm",t)},logout:function(){return a.post("user/logout")},favorites:function(t){return a.get("user/favorites/".concat(t))},deleteFavorite:function(t){return a.delete("user/favorites/".concat(t))}},m={get:function(){return a.get("captcha")}}},1703:function(t,e,n){n.d(e,{A:function(){return l}});n(4553),n(1539),n(8674);var s=n(7757),i=n.n(s),r=n(6646),o=n(8328);function a(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}var c={index:0,mode:0,image:{},color:"#008080"},l={saveSettings:function(t){return r.Z.save("background_v2",t)},loadSettings:function(){var t;return null!==(t=r.Z.load("background_v2"))&&void 0!==t?t:c},loadOnStartup:function(){var t,e=this;return(t=i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(n=e.loadSettings()).mode){t.next=6;break}return t.next=4,o.Oq.random();case 4:n.image=t.sent.data,e.saveSettings(n);case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){a(r,s,i,o,c,"next",t)}function c(t){a(r,s,i,o,c,"throw",t)}o(void 0)}))})()},nextBackground:function(t,e){var n=this.loadSettings(),s=this.getIndex(t,n.image)+e;return s<0?s=t.length-1:s>=t.length&&(s=0),n.mode=1,n.image=t[s],this.saveSettings(n),n},getIndex:function(t,e){if(void 0===e)return 0;var n=t.findIndex((function(t){return t.id===e.id}));return n<0?0:n},randomBackground:function(t){var e=this.loadSettings(),n=Math.floor(Math.random()*t.length);return e.mode=0,e.image=t[n],this.saveSettings(e),e},solidBackground:function(){var t=this.loadSettings();return t.mode=2,this.saveSettings(t),t},setSolidColor:function(t){var e=this.loadSettings();return e.color=t,this.saveSettings(e),e}}},6646:function(t,e){e.Z={save:function(t,e){localStorage.setItem(t,JSON.stringify(e))},load:function(t){return JSON.parse(localStorage.getItem(t))}}},3879:function(t,e,n){var s=n(7484),i=n(1646);s.extend(i),e.Z={methods:{dur:function(t){return s.duration(1e3*t).format("mm:ss")},sd:function(t){return s.unix(t).format("MMM DD")},sdy:function(t){return s.unix(t).format("MMM DD, YYYY")}},computed:{isMobile:function(){return!0}}}},7115:function(t,e,n){n(1539),n(9714);e.Z={methods:{openWindow:function(t){this.$store.dispatch("windows/open",{name:t}).then()},closeWindow:function(t){t?this.$store.dispatch("windows/close",t).then():this.$refs.window.close()},alert:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"warn",s=Math.random().toString(36).substr(2,9);this.$store.dispatch("windows/open",{name:"alert-"+s,text:t,title:e,type:n}).then()},songInfo:function(t){this.$store.dispatch("windows/open",{name:"song-"+t,id:t}).then()}}}},7869:function(t,e,n){var s=n(6646);e.Z={namespaced:!0,state:{auth:!1,username:"Guest",token:"1",agent:"Nightwave Plaza Axios"},mutations:{auth:function(t,e){t.auth=!0,t.username=e.username},token:function(t,e){t.token=e},agent:function(t,e){t.agent=e},logout:function(t){t.auth=!1,t.username="Guest"}},actions:{logout:function(t){t.commit("logout"),t.commit("player/reaction",0,{root:!0}),s.Z.save("reaction",null)}},getters:{auth:function(t){return t.auth},username:function(t){return t.username},token:function(t){return t.token}}}},4688:function(t,e,n){n(1539),n(8674);var s=n(7757),i=n.n(s),r=n(538);n(9714),n(9720),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(7042),n(8309),n(1038),n(4916);function o(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var s,i,r=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(s=n.next()).done)&&(r.push(s.value),!e||r.length!==e);o=!0);}catch(t){a=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}var l={handles:{},lastTicked:0,tickInterval:300,rnd:function(){return Math.random().toString(36).substring(2,15)},set:function(t,e){var n=this.rnd()+this.rnd();return this.handles[n]={func:t,timeout:e,lastTicked:0,busy:!1},n},stop:function(t){delete this.handles[t]},tick:function(){var t=Date.now();if(!(t-this.lastTicked<this.tickInterval)){for(var e=0,n=Object.entries(this.handles);e<n.length;e++){var s=a(n[e],2),i=s[0],r=s[1];t-r.lastTicked>=r.timeout&&this.handle(i).then()}this.lastTicked=Date.now()}},handle:function(t){var e,n=this;return(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.handles[t].busy){e.next=5;break}return n.handles[t].busy=!0,e.next=4,n.handles[t].func();case 4:n.handles[t].busy=!1;case 5:n.handles[t].lastTicked=Date.now();case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(s,i){var r=e.apply(t,n);function a(t){o(r,s,i,a,c,"next",t)}function c(t){o(r,s,i,a,c,"throw",t)}a(void 0)}))})()}},u=n(629),d=n(4645),p=(n(7327),n(2772),n(1249),n(5212),n(6699),n(2023),{namespaced:!0,state:{windows:[{name:"player"}],minimized:[],activeWindow:"player",activeZIndex:100},mutations:{open:function(t,e){t.windows.push(e)},close:function(t,e){t.windows=t.windows.filter((function(t){return t.name!==e}))},pullUp:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.activeWindow=null!=e?e:t.windows[t.windows.length-1].name,t.activeZIndex++},title:function(t,e){var n=e.name,s=e.title,i=t.windows.map((function(t){return t.name})).indexOf(n);t.windows[i].title=s},minimize:function(t,e){t.minimized.push(e)},restore:function(t,e){t.minimized=t.minimized.filter((function(t){return t!==e}))}},actions:{open:function(t,e){t.getters.isWindowOpen(e.name)||t.commit("open",e),t.commit("pullUp",e.name)},close:function(t,e){t.commit("close",e);var n=t.getters.windows;n.length>0&&t.commit("pullUp",n[n.length-1].name)},updateTitle:function(t,e){var n=e.name,s=e.title;t.getters.isWindowOpen(n)&&t.commit("title",{name:n,title:s})},minimize:function(t,e){t.getters.isWindowMinimized(e)||t.commit("minimize",e)},restore:function(t,e){t.getters.isWindowMinimized(e)&&(t.commit("restore",e),t.commit("pullUp",e))}},getters:{windows:function(t){return t.windows},isWindowOpen:function(t){return function(e){return t.windows.some((function(t){return t.name===e}))}},isWindowMinimized:function(t){return function(e){return t.minimized.indexOf(e)>=0}},alerts:function(t){return t.windows.filter((function(t){return t.name.includes("alert-")}))},songWindows:function(t){return t.windows.filter((function(t){return t.name.includes("song-")}))},activeWindow:function(t){return t.activeWindow},globalZ:function(t){return t.activeZIndex}}}),f=n(7869);function v(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){v(r,s,i,o,a,"next",t)}function a(t){v(r,s,i,o,a,"throw",t)}o(void 0)}))}}r.Z.use(u.ZP);var m=new u.ZP.Store({modules:{windows:p,player:{namespaced:!0,state:{song:{id:"",artist:"...",title:"...",position:0,length:0,reactions:0},listeners:0,reaction:{score:0,songId:""}},mutations:{listeners:function(t,e){t.listeners=e},reactions:function(t,e){t.song.reactions=e},reaction:function(t,e){t.reaction.songId=t.song.id,t.reaction.score=e},clearReaction:function(t){t.reaction.songId="",t.reaction.score=0},currentSong:function(t,e){t.song=e},artwork:function(t,e){t.song.artwork_src=e}},actions:{setReaction:function(t,e){t.commit("reaction",e),this._actions.setReactionNative&&t.dispatch("setReactionNative",e,{root:!0}).then()}},getters:{listeners:function(t){return t.listeners},currentSong:function(t){return t.song},reaction:function(t){return t.reaction}}},background:{namespaced:!0,state:{backgrounds:!1,background:{}},mutations:{backgrounds:function(t,e){t.backgrounds=e},background:function(t,e){t.background=e}},getters:{backgrounds:function(t){return t.backgrounds},background:function(t){return t.background}}},user:f.Z},state:{data:{},userAgent:"Android Axios",isPlaying:!1,sleepTime:0},mutations:{pushData:function(t,e){var n=e.name,s=e.data;t.data[n]=s},userAgent:function(t,e){t.userAgent=e},isPlaying:function(t,e){t.isPlaying=e},sleepTime:function(t,e){t.sleepTime=e}},actions:{login:function(t,e){return h(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.dispatch("setToken",e.token);case 2:t.commit("user/auth",e);case 3:case"end":return n.stop()}}),n)})))()},logout:function(t){return h(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dispatch("setToken","");case 2:return e.next=4,t.dispatch("user/logout");case 4:case"end":return e.stop()}}),e)})))()},setToken:function(t,e){return h(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.commit("user/token",e),n.next=3,d._.setAuthToken(e);case 3:case"end":return n.stop()}}),n)})))()},setReactionNative:function(t,e){return h(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d._.setReaction(e);case 2:case"end":return t.stop()}}),t)})))()}},getters:{isPlaying:function(t){return t.isPlaying},sleepTime:function(t){return t.sleepTime},viewVersion:function(){return"220221234439"}}});n(9070),n(7941),n(5003),n(9554),n(4747),n(9337),n(3321);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b={computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,u.Se)("windows",["alerts"]))},_=b,y=n(1900),k=(0,y.Z)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.alerts,(function(t){return n("window-alert",{key:t.id,attrs:{name:t.name,text:t.text,title:t.title,type:t.type}})})),1)}),[],!1,null,null,null).exports,C={props:{block:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}},x=(0,y.Z)(C,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"noselect",class:{"d-block":t.block},attrs:{ontouchstart:"",disabled:t.disabled},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)}),[],!1,null,null,null).exports,P=n(8328);function O(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}var S={data:function(){return{captchaImage:""}},mounted:function(){this.refresh()},methods:{refresh:function(){var t,e=this;return(t=i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.xx.get();case 2:n=t.sent,e.captchaImage=n.data.img,e.$emit("refresh",n.data.key);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){O(r,s,i,o,a,"next",t)}function a(t){O(r,s,i,o,a,"throw",t)}o(void 0)}))})()}}},j=S,A=(0,y.Z)(j,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("img",{staticClass:"img-captcha",attrs:{src:t.captchaImage},on:{click:t.refresh}})}),[],!1,null,null,null).exports,$=n(4772),E={props:{scroll:{type:Boolean,default:!1}},methods:{scrollTop:function(){this.$refs.list.scrollTop=0},refreshScrollbar:function(){var t=this;this.scroll&&this.$nextTick((function(){t.scrollbar.update()}))}},mounted:function(){this.scroll&&(this.scrollbar=new $.Z(this.$refs.list))},beforeDestroy:function(){this.scroll&&(this.scrollbar.destroy(),this.scrollbar=null)}},Z=(0,y.Z)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"list",staticClass:"list",class:{scroll:t.scroll}},[n("table",{staticClass:"hover"},[t._t("default")],2)])}),[],!1,null,null,null).exports,D={props:{scroll:{type:Boolean,default:!1}},mounted:function(){this.scroll&&(this.scrollbar=new $.Z(this.$refs.memo))},beforeDestroy:function(){this.scroll&&(this.scrollbar.destroy(),this.scrollbar=null)}},T=(0,y.Z)(D,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"memo",staticClass:"memo p-2",class:{scroll:t.scroll}},[t._t("default")],2)}),[],!1,null,null,null).exports,W=n(6646);function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N={data:function(){return{newsLoaded:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){I(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,u.Se)("windows",["isWindowOpen"])),mounted:function(){var t=this;this.isMobile&&this.$store.subscribe((function(e){"pushData"===e.type&&"status"===e.payload.name&&(t.newsLoaded||(t.loadNews(),t.newsLoaded=!0))}))},methods:{loadNews:function(){var t=this;P.r.latest().then((function(e){W.Z.load("latestNews")!==e.data.updated_at&&t.openWindow("news")}))}}},U=N,M=(0,y.Z)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isWindowOpen("news")?n("window-news"):t._e()}),[],!1,null,null,null).exports,R=(n(9653),n(1058),{data:function(){return{page:1}},watch:{page:function(){this.$refs["page-input"].value=this.page,this.$emit("change",this.page)}},props:{pages:{type:Number}},methods:{nextPage:function(t){var e=this.page+t;e<1&&(e=1),e>this.pages&&(e=this.pages),this.page=e},setPage:function(t){var e=parseInt(t.target.value);!isNaN(e)&&e>0&&e<=this.pages?this.page=e:this.$refs["page-input"].value=this.page},reset:function(){this.page=1}}}),B=(0,y.Z)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row no-gutters pagination"},[t.page>1?n("div",{staticClass:"col-4 pr-1"},[n("win-btn",{staticClass:"d-block",on:{click:function(e){return t.nextPage(-1)}}},[n("i",{staticClass:"i icon-left-hand"})])],1):t._e(),t._v(" "),n("div",{staticClass:"col-4"},[n("input",{ref:"page-input",staticClass:"d-block",attrs:{type:"number",value:"1"},on:{change:t.setPage}})]),t._v(" "),t.pages>1&&t.page<t.pages?n("div",{staticClass:"col-4 pl-1"},[n("win-btn",{staticClass:"d-block",on:{click:function(e){return t.nextPage(1)}}},[n("i",{staticClass:"i icon-right-hand"})])],1):t._e()])}),[],!1,null,null,null).exports;function L(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Q={props:{name:{type:String}},data:function(){return{likes:0}},computed:F(F({},(0,u.Se)("player",["reaction","currentSong"])),{},{likeIcon:function(){return this.reaction.score>1?"icon-favorite":"icon-like"},likeColor:function(){if(this.currentSong.id===this.reaction.songId)return 2===this.reaction.score?"#FFD300":1===this.reaction.score?"#c12727":""}}),created:function(){this.sending=!1},mounted:function(){var t=this;this.$store.subscribe((function(e,n){"player/reactions"!==e.type&&"player/currentSong"!==e.type||(t.likes=n.player.song.reactions),"player/currentSong"===e.type&&t.loadState(),"player/reaction"===e.type&&t.saveState()}))},methods:{like:function(){1===this.reaction.score?this.send(2):2===this.reaction.score?this.send(0):this.send(1)},send:function(t){var e,n=this;return(e=i().mark((function e(){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.sending){e.next=2;break}return e.abrupt("return");case 2:return n.sending=!0,e.prev=3,e.next=6,P.gw.react(t);case 6:s=e.sent,n.$store.commit("player/reactions",s.data.reactions),n.$store.dispatch("player/setReaction",t).then(),n.sendTip(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),401===e.t0.response.status&&n.alert("Please sign in to your Nightwave Plaza account to use the like button.","Error");case 15:return e.prev=15,n.sending=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})),function(){var t=this,n=arguments;return new Promise((function(s,i){var r=e.apply(t,n);function o(t){L(r,s,i,o,a,"next",t)}function a(t){L(r,s,i,o,a,"throw",t)}o(void 0)}))})()},loadState:function(){var t=W.Z.load("reaction");t&&t.songId===this.currentSong.id?this.$store.commit("player/reaction",t.score):this.$store.commit("player/clearReaction")},saveState:function(){W.Z.save("reaction",this.reaction)},sendTip:function(){W.Z.load("reactionTip")||(this.alert('You have liked the song. Nice!<br />\n                        Clicking the <i class="i icon-like"></i> button twice will add song to your favorites list. Give it a try!',"N I C E","info"),W.Z.save("reactionTip",!0))}}},V=Q,Y=(0,y.Z)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-btn",{attrs:{block:""},on:{click:t.like}},[n("i",{staticClass:"i mr-1",class:t.likeIcon,style:{color:t.likeColor}}),t._v(t._s(t.likes))])}),[],!1,null,null,null).exports,J={data:function(){return{length:0,position:0,actualPosition:0,songUpdated:0,textTime:0,text:""}},computed:{display:function(){return this.textTime>0?this.text:this.clock},clock:function(){return this.length>0?this.dur(this.actualPosition)+" / "+this.dur(this.length):"..."}},mounted:function(){var t=this;this.showText("Welcome back!"),this.tickerId=l.set(this.tick,300),this.$store.subscribe((function(e,n){"player/currentSong"===e.type&&(t.position=n.player.song.position,t.length=n.player.song.length,t.songUpdated=Date.now())}))},methods:{showText:function(t){this.text=t,this.textTime=2e3},resetTimer:function(){l.stop(this.tickerId),this.tickerId=l.set(this.tick,300)},tick:function(){var t=Date.now(),e=Math.floor((t-this.songUpdated)/1e3)+this.position;this.songUpdated&&this.length-e>0&&(this.actualPosition=e),this.textTime>0&&(this.textTime-=300)}}},G=(0,y.Z)(J,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"player-time"},[t._v(t._s(t.display))])}),[],!1,null,null,null).exports;function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tt={computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){X(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,u.Se)("windows",["songWindows"]))},et=tt,nt=(0,y.Z)(et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.songWindows,(function(t){return n("window-song",{key:t.id,attrs:{id:t.id,name:t.name}})})),1)}),[],!1,null,null,null).exports;function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rt={data:function(){return{time:"0:00 PM"}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){it(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,u.Se)("windows",["isWindowOpen","windows","activeWindow","isWindowMinimized"])),created:function(){l.set(this.getNow,1e3)},methods:{getNow:function(){this.time=(new Date).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},toggleMinimize:function(t){this.isWindowMinimized(t)?this.$store.dispatch("windows/restore",t):this.activeWindow===t?this.$store.dispatch("windows/minimize",t):this.$store.commit("windows/pullUp",t)}}},ot=rt,at=(0,y.Z)(ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"taskbar d-flex flex-nowrap"},[t._m(0),t._v(" "),t._l(t.windows,(function(e){return n("win-btn",{key:e.name,staticClass:"mr-1",class:{active:t.activeWindow===e.name&&!t.isWindowMinimized(e.name)},staticStyle:{flex:"1 1 auto"},on:{click:function(n){return t.toggleMinimize(e.name)}}},[n("img",{attrs:{src:"img/win/ball.png"}}),t._v(" "),n("div",{staticClass:"title",domProps:{innerHTML:t._s(e.title)}})])})),t._v(" "),n("div",{staticClass:"local-time ml-auto",staticStyle:{flex:"0 0 60px"}},[t._v(t._s(t.time))])],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"0 0 10px"}},[e("div",{staticClass:"divider mx-1"})])}],!1,null,null,null).exports;function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){ut(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dt={data:function(){return{style:{zIndex:100,position:"relative",left:"0px",top:"0px",transform:"",width:""},windowDefaultPosition:[0,0],windowPos:[0,0],borders:[0,0],moving:!1}},watch:{windowPos:function(){this.style.left=this.windowPos[0]+"px",this.style.top=this.windowPos[1]+"px"}},props:{title:{type:String},name:{type:String},isAlert:{type:Boolean},width:{type:Number,default:500},fluidHeight:{type:Boolean,default:!1}},computed:lt(lt({},(0,u.Se)("windows",["activeWindow","globalZ","isWindowOpen","isWindowMinimized"])),{},{isWindowInactive:function(){return this.activeWindow!==this.name},isMinimized:function(){return this.isWindowMinimized(this.name)}}),methods:{resetPosition:function(){this.windowPos=[0,0]},pullUp:function(){this.$store.commit("windows/pullUp",this.name),this.style.zIndex=this.globalZ},startMove:function(t){"BUTTON"!==t.target.tagName&&"SPAN"!==t.target.tagName&&(this.recalculatePositions(),this.moving=!0,this.offsets=[t.offsetX,t.offsetY])},move:function(t){if(this.moving){t.preventDefault();var e=[t.clientX-this.offsets[0],t.clientY-this.offsets[1]],n=e[0]-this.windowDefaultPosition[0],s=e[1]-this.windowDefaultPosition[1];e[0]-15<=0&&(n=0-this.windowDefaultPosition[0]),e[1]-15<=0&&(s=0-this.windowDefaultPosition[1]),e[0]+15>=this.borders[0]&&(n=this.windowDefaultPosition[0]),e[1]+15>=this.borders[1]&&(s=this.borders[1]-this.windowDefaultPosition[1]),this.windowPos=[n,s]}},stopMove:function(t){this.moving&&(t.preventDefault(),this.moving=!1)},recalculatePositions:function(){var t=[window.innerWidth-this.$refs.window.offsetWidth,window.innerHeight-this.$refs.window.offsetHeight];if(0===this.windowPos[0]&&0===this.windowPos[1]){var e=this.$refs.window.getBoundingClientRect();this.windowDefaultPosition=[e.x,e.y]}else this.windowDefaultPosition[0]+=(t[0]-this.borders[0])/2,this.windowDefaultPosition[1]+=(t[1]-this.borders[1])/2;this.borders=t},minimize:function(){this.$store.dispatch("windows/minimize",this.name)},close:function(){this.closeWindow(this.name)}},beforeMount:function(){this.$store.dispatch("windows/updateTitle",{name:this.name,title:this.title}).then()},mounted:function(){var t=this;this.style.zIndex=this.globalZ,this.style.width=this.width+"px",this.width>0&&this.width<=320&&(this.style.maxWidth=this.width+"px"),this.$store.subscribe((function(e,n){"windows/pullUp"===e.type&&t.name===n.windows.activeWindow&&(t.style.zIndex=n.windows.activeZIndex)})),window.addEventListener("mouseup",this.stopMove),window.addEventListener("mousemove",this.move),window.addEventListener("resize",this.recalculatePositions)},destroyed:function(){window.removeEventListener("mouseup",this.stopMove),window.removeEventListener("mousemove",this.move),window.removeEventListener("resize",this.recalculatePositions)}},pt=(0,y.Z)(dt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMinimized,expression:"!isMinimized"}],ref:"frame",staticClass:"frame row align-items-center",attrs:{id:"window-"+t.name}},[n("div",{staticClass:"win98 col pl-0 pr-0",class:{alert:t.isAlert,"fluid-height":t.fluidHeight}},[n("div",{ref:"window",staticClass:"window",style:t.style,on:{mousedown:t.pullUp}},[n("div",{staticClass:"inner"},[n("div",{staticClass:"header header-draggable noselect",class:{inactive:t.isWindowInactive},on:{dblclick:t.resetPosition,mousedown:t.startMove}},[n("div",{staticClass:"icon"}),t._v("\n          "+t._s(t.title)+"\n          "),t._t("header",(function(){return[n("div",{staticClass:"buttons"},[n("win-btn",{staticClass:"button-minimize",on:{click:t.minimize}},[n("span")]),t._v(" "),n("win-btn",{staticClass:"button-close",on:{click:t.close}},[n("span")])],1)]}))],2),t._v(" "),t._t("default")],2)])])])}),[],!1,null,null,null).exports;r.Z.component("win-alerts",k),r.Z.component("win-btn",x),r.Z.component("win-captcha",A),r.Z.component("win-list",Z),r.Z.component("win-memo",T),r.Z.component("win-news-loader",M),r.Z.component("win-pagination",B),r.Z.component("win-player-reactions",Y),r.Z.component("win-player-time",G),r.Z.component("win-song-info",nt),r.Z.component("win-taskbar",at),r.Z.component("win-window",pt);function ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ht={name:"window-about",computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(n),!0).forEach((function(e){vt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,u.Se)(["viewVersion"])),methods:{openCredits:function(){this.openWindow("credits"),this.closeWindow()},openNews:function(){this.openWindow("news"),this.closeWindow()}}},mt=ht,wt=(0,y.Z)(mt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:440,fluidHeight:"",name:"about",title:"About"}},[n("div",{staticClass:"content-fluid p-2"},[n("div",{staticClass:"d-flex flex-column h-100"},[n("div",{staticClass:"d-flex flex-grow-1 align-items-stretch"},[n("div",{staticClass:"w-100",staticStyle:{position:"relative"}},[n("win-memo",{attrs:{scroll:""}},[n("p",{staticClass:"lead"},[t._v("Welcome to Nightwave Plaza!")]),t._v(" "),n("p",[t._v("Nightwave Plaza is a free 24/7 online vaporwave radio station. The broadcast also includes some future\n              funk\n              and experimental genres. We hope you enjoy.")]),t._v(" "),n("p",[t._v("Join our community "),n("a",{attrs:{href:"https://plaza.one/discord"}},[t._v("Discord server")]),t._v("!")]),t._v(" "),n("p",{staticClass:"lead mt-3"},[t._v("Submissions")]),t._v(" "),n("p",[t._v("Please use "),n("a",{attrs:{href:"https://plaza.one/submissions",target:"blank"}},[t._v("this form")]),t._v(" to send music for\n              broadcasting.")]),t._v(" "),n("p",{staticClass:"lead mt-3"},[t._v("Contact Information")]),t._v(" "),n("p",[t._v("Please send any enquiries you may have to "),n("a",{attrs:{href:"mailto:mail@plaza.one"}},[t._v("mail@plaza.one")]),t._v(".")]),t._v(" "),n("p",[t._v("Any updates or upcoming maintenance on Nightwave Plaza can be found on our official Twitter account: "),n("a",{attrs:{href:"https://twitter.com/nightwaveplaza/",target:"_blank"}},[t._v("@NightwavePlaza")]),t._v(".")]),t._v(" "),n("p",[t._v("Nightwave Plaza can also be found on "),n("a",{attrs:{href:"https://plaza.one/youtube",target:"_blank"}},[t._v("YouTube")]),t._v(", "),n("a",{attrs:{href:"https://plaza.one/facebook",target:"_blank"}},[t._v("Facebook")]),t._v(",\n              "),n("a",{attrs:{href:"https://plaza.one/vk",target:"_blank"}},[t._v("VK")]),t._v(", "),n("a",{attrs:{href:"https://plaza.one/lastfm",target:"_blank"}},[t._v("Last.fm")]),t._v(" and "),n("a",{attrs:{href:"https://plaza.one/tunein",target:"_blank"}},[t._v("TuneIn")]),t._v(".\n            ")]),t._v(" "),n("p",{staticClass:"lead mt-3"},[t._v("Streaming Links")]),t._v(" "),n("p",[t._v("You are able to listen to Nightwave Plaza's broadcasts through your favorite music player instead of a\n              browser! Use the following links:")]),t._v(" "),n("p",{staticClass:"mt-2"},[n("b",[t._v("Playlists")]),n("br"),t._v(" "),n("a",{attrs:{href:"https://plaza.one/plaza.m3u",target:"_blank"}},[t._v("m3u file for Winamp")]),n("br"),t._v(" "),n("a",{attrs:{href:"https://plaza.one/plaza.pls",target:"_blank"}},[t._v("pls file for foobar2k")]),n("br")]),t._v(" "),n("p",{staticClass:"mt-2"},[n("b",[t._v("Streams")]),n("br"),t._v(" "),n("a",{attrs:{href:"http://radio.plaza.one/opus",target:"_blank"}},[t._v("http://radio.plaza.one/opus")]),t._v(" (opus /\n              96kbps)"),n("br"),t._v(" "),n("a",{attrs:{href:"http://radio.plaza.one/opus_low",target:"_blank"}},[t._v("http://radio.plaza.one/opus_low")]),t._v(" (opus /\n              64kbps)"),n("br"),t._v(" "),n("a",{attrs:{href:"http://radio.plaza.one/mp3",target:"_blank"}},[t._v("http://radio.plaza.one/mp3")]),t._v(" (mp3 / 128kbps)"),n("br"),t._v(" "),n("a",{attrs:{href:"http://radio.plaza.one/mp3_low",target:"_blank"}},[t._v("http://radio.plaza.one/mp3_low")]),t._v(" (mp3 /\n              96kbps)"),n("br")]),t._v(" "),n("p",{staticClass:"mt-4"},[n("a",{attrs:{href:"https://plaza.one/privacy",target:"_blank"}},[t._v("Privacy policy")])]),t._v(" "),n("p",{staticClass:"mt-2"},[t._v("\n              View build: "+t._s(t.viewVersion)+"\n            ")])])],1)]),t._v(" "),n("div",{staticClass:"d-flex"},[n("div",{staticClass:"row buttons no-gutters mt-2 w-100"},[n("div",{staticClass:"col-auto"},[n("win-btn",{staticClass:"px-4 mr-2",on:{click:t.openCredits}},[t._v("Credits")])],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("win-btn",{staticClass:"px-4 mr-2",on:{click:t.openNews}},[t._v("News")])],1),t._v(" "),n("div",{staticClass:"col-auto ml-auto"},[n("win-btn",{staticClass:"px-4",on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])])])])])}),[],!1,null,null,null).exports,gt={props:{text:{type:String},title:{type:String},name:{type:String},type:{type:String}}},bt=(0,y.Z)(gt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{isAlert:!0,name:t.name,title:t.title,width:290}},[n("div",{staticClass:"p-2"},[n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-auto text-center align-self-center"},[n("div",{staticClass:"alert-icon",class:t.type})]),t._v(" "),n("div",{staticClass:"col align-self-center"},[n("p",{staticClass:"pl-2",staticStyle:{"line-height":"125%"},domProps:{innerHTML:t._s(t.text)}})])]),t._v(" "),n("div",{staticClass:"text-center"},[n("win-btn",{staticClass:"mt-2 mx-auto px-4",on:{click:function(e){return t.closeWindow()}}},[t._v("OK")])],1)])])}),[],!1,null,null,null).exports,_t=(0,y.Z)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:420,name:"credits",title:"Credits"}},[n("div",{staticClass:"pt-2 pl-2 pr-2"},[n("win-memo",[n("p",{staticClass:"mb-2"},[n("b",[t._v("Nightwave Plaza")]),t._v(" website, Android application and stream created and maintained by\n        Alexander Morozov ("),n("a",{attrs:{href:"https://discordapp.com/users/104038869388775424",target:"_blank"}},[t._v("pengu#8888")]),t._v("@discord).\n      ")]),t._v(" "),n("p",{staticClass:"mb-2"},[n("b",[t._v("Nightwave Plaza iOS app")]),t._v(" created by "),n("a",{attrs:{href:"https://appsquick.ly/",target:"_blank"}},[t._v("Aleksey Garbarev")]),t._v(" and\n        Alexander Morozov ("),n("a",{attrs:{href:"https://discordapp.com/users/104038869388775424",target:"_blank"}},[t._v("pengu#8888")]),t._v(").\n      ")]),t._v(" "),n("p",{staticClass:"mb-2"},[n("b",[t._v("All musics and background images")]),t._v(" belong to the authors. Musical content has been provided\n        by\n        authors and music labels. If you have any copyright issue, please let us know.")])]),t._v(" "),n("div",{staticClass:"text-center my-2"},[n("win-btn",{staticClass:"px-4",on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)],1)])}),[],!1,null,null,null).exports,yt=n(7484),kt={data:function(){return{loading:!0,history:[],total:0,perPage:25,pages:0,page:1,dateFrom:0,dateTo:0}},mounted:function(){this.fetchHistory(this.page)},watch:{page:function(){this.fetchHistory(this.page)}},methods:{changePage:function(t){this.page=t},fetchHistory:function(t){var e=this;this.$refs.list.scrollTop(),this.loading=!0,P.m8.get(t).then((function(t){e.perPage=t.data.per_page,e.pages=t.data.pages,e.history=t.data.songs,e.total=t.data.count,e.loading=!1,e.dateFrom=t.data.from_date,e.dateTo=t.data.to_date,e.$refs.list.refreshScrollbar()})).catch((function(t){return e.alert(t.response.data.error,"Error")}))},refreshScrollbar:function(){var t=this;this.$nextTick((function(){t.scrollbar.update()}))},gt:function(t){return yt.unix(t).format("HH:mm")}},beforeDestroy:function(){this.history=null}},Ct=(0,y.Z)(kt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:400,fluidHeight:"",name:"history",title:"Play History"}},[n("div",{staticClass:"content-fluid p-2"},[n("div",{staticClass:"d-flex flex-column h-100"},[n("div",{staticClass:"d-flex mb-1"},[n("div",{staticClass:"row no-gutters w-100"},[t.history.length>0?n("div",{staticClass:"col"},[t._v("Showing history: "+t._s(t.sd(t.dateFrom))+" —\n            "+t._s(t.sd(this.dateTo))+".\n          ")]):t._e(),t._v(" "),n("div",{staticClass:"col-auto"},[n("a",{attrs:{href:"https://plaza.one/lastfm",target:"_blank"}},[t._v("Last.fm history")])])])]),t._v(" "),n("div",{staticClass:"d-flex flex-grow-1 align-items-stretch"},[n("div",{staticClass:"w-100",staticStyle:{position:"relative"}},[t.loading?n("div",{staticClass:"content-loading"}):t._e(),t._v(" "),n("win-list",{ref:"list",attrs:{scroll:""}},t._l(t.history,(function(e){return n("tr",[n("td",{staticClass:"pl-2 pr-1 py-1 show-info",on:{click:function(n){return t.songInfo(e.id)}}},[n("div",{staticClass:"artist"},[t._v(t._s(e.artist))]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(e.title))])]),t._v(" "),n("td",{staticClass:"pr-2 text-right noselect",staticStyle:{width:"48px"}},[t._v("\n                "+t._s(t.sd(e.played_at))),n("br"),t._v("\n                "+t._s(t.gt(e.played_at))+"\n              ")])])})),0)],1)]),t._v(" "),n("div",{staticClass:"d-flex"},[n("div",{staticClass:"row no-gutters pt-2 w-100"},[n("div",{staticClass:"col"},[t.history.length>0?n("win-pagination",{attrs:{pages:t.pages},on:{change:t.changePage}}):t._e()],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("win-btn",{staticClass:"px-4",on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])])])]),t._v(" "),n("div",{staticClass:"statusbar row no-gutters noselect"},[n("div",{staticClass:"col-3 cell d"},[t._v("Pages: "+t._s(t.pages))]),t._v(" "),n("div",{staticClass:"col cell"},[t._v("Songs: "+t._s(t.total))])])])}),[],!1,null,null,null).exports,xt={data:function(){return{article:{text:"",created_at:0},page:1,length:1,pages:1,latest:0}},mounted:function(){this.getArticle()},methods:{getArticle:function(){var t=this;P.r.get(this.page).then((function(e){t.article=e.data.articles[0],0===t.latest&&(t.latest=t.article.created_at)})).catch()},changePage:function(t){this.page=t,this.getArticle()}},beforeCreate:function(){console.log("wwww")},beforeDestroy:function(){W.Z.save("latestNews",this.latest)}},Pt=(0,y.Z)(xt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:350,name:"news",title:"News"}},[n("div",{staticClass:"p-2"},[n("win-memo",[""===t.article.text?n("div",{staticClass:"content-loading"}):t._e(),t._v(" "),""!==t.article.text?n("div",{domProps:{innerHTML:t._s(t.article.text)}}):t._e(),t._v(" "),""!==t.article.text?n("div",{staticClass:"row justify-content-between"},[n("div",{staticClass:"col-auto",domProps:{innerHTML:t._s(t.article.author)}}),t._v(" "),n("div",{staticClass:"col-auto",domProps:{innerHTML:t._s(t.sdy(t.article.created_at))}})]):t._e()]),t._v(" "),n("div",{staticClass:"row mt-2 no-gutters noselect"},[n("div",{staticClass:"col"},[t.length>0?n("win-pagination",{attrs:{pages:t.pages},on:{change:t.changePage}}):t._e()],1),t._v(" "),n("div",{staticClass:"col-4 ml-auto"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])],1)])}),[],!1,null,null,null).exports,Ot=(n(3112),{data:function(){return{loading:!0,charts:[],total:0,perPage:25,pages:4,page:1,range:"overtime"}},mounted:function(){this.fetchRatings(this.range,this.page)},watch:{range:function(){this.page=1,this.$refs.pagination.reset(),this.fetchRatings(this.range,this.page)},page:function(){this.fetchRatings(this.range,this.page)}},methods:{pad:function(t){return t.toString().padStart(3,"0")},changePage:function(t){this.page=t},fetchRatings:function(t,e){var n=this;this.$refs.list.scrollTop(),this.loading=!0,P.ZE.get(t,e).then((function(t){n.perPage=t.data.per_page,n.pages=t.data.pages,n.charts=t.data.songs,n.total=t.data.count,n.loading=!1,n.$refs.list.refreshScrollbar()})).catch((function(t){return n.alert(t.response.data.error,"Error")}))}},beforeDestroy:function(){this.charts=null}}),St=(0,y.Z)(Ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:440,fluidHeight:"",name:"ratings",title:"Ratings"}},[n("div",{staticClass:"content-fluid p-2"},[n("div",{staticClass:"d-flex flex-column h-100"},[n("div",{staticClass:"d-flex mb-1"},[n("win-btn",{staticClass:"songs-range mr-1",class:{active:"overtime"===t.range},on:{click:function(e){t.range="overtime"}}},[t._v("\n          Overtime\n        ")]),t._v(" "),n("win-btn",{staticClass:"songs-range mr-1",class:{active:"monthly"===t.range},on:{click:function(e){t.range="monthly"}}},[t._v("\n          Monthly\n        ")]),t._v(" "),n("win-btn",{staticClass:"songs-range mr-0",class:{active:"weekly"===t.range},on:{click:function(e){t.range="weekly"}}},[t._v("\n          Weekly\n        ")])],1),t._v(" "),n("div",{staticClass:"d-flex flex-grow-1 align-items-stretch"},[n("div",{staticClass:"w-100",staticStyle:{position:"relative"}},[t.loading?n("div",{staticClass:"content-loading"}):t._e(),t._v(" "),n("win-list",{ref:"list",attrs:{scroll:""}},t._l(t.charts,(function(e,s){return n("tr",{staticClass:"hover"},[n("td",{staticClass:"text-center noselect",staticStyle:{width:"37px"}},[t._v(t._s(t.pad((t.page-1)*t.perPage+s+1))+"\n              ")]),t._v(" "),n("td",{staticClass:"py-1 show-info",on:{click:function(n){return t.songInfo(e.id)}}},[n("div",{staticClass:"artist"},[t._v(t._s(e.artist))]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(e.title))])]),t._v(" "),"overtime"!==t.range?n("td",{staticClass:"text-right noselect pr-2 nowrap",staticStyle:{width:"57px"}},[t._v("\n                "+t._s(e.likes)),n("i",{staticClass:"i icon-like ml-1",staticStyle:{color:"#c12727"}})]):t._e()])})),0)],1)]),t._v(" "),n("div",{staticClass:"d-flex"},[n("div",{staticClass:"row no-gutters mt-2 w-100"},[n("div",{staticClass:"col"},[n("win-pagination",{ref:"pagination",attrs:{pages:t.pages},on:{change:t.changePage}})],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("win-btn",{staticClass:"px-4",on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])])])]),t._v(" "),n("div",{staticClass:"statusbar row no-gutters noselect"},[n("div",{staticClass:"col-3 cell d"},[t._v("Pages: "+t._s(t.pages))]),t._v(" "),n("div",{staticClass:"col cell"},[t._v("Songs: "+t._s(t.total))])])])}),[],!1,null,null,null).exports,jt=n(1703),At={data:function(){return{currentBackground:{},backgrounds:[],selected:"",palette:["#ffffff","#000000","#c0c0c0","#808080","#ff0000","#800000","#ffff00","#808000","#00ff00","#008000","#00ffff","#008080","#0000ff","#000080","#ff00ff","#800080"],theme:"win98",themes:[["desert","Desert"],["contrast","High Contrast"],["rainy","Rainy Day"],["rose","Rose"],["win98","Windows Standard"]]}},beforeMount:function(){this.currentBackground=jt.A.loadSettings()},mounted:function(){var t,e=this;P.Oq.get().then((function(t){return e.backgrounds=t.data})),this.selected=this.currentBackground.color,this.theme=null!==(t=W.Z.load("theme"))&&void 0!==t?t:"win98"},methods:{next:function(t){this.currentBackground=jt.A.nextBackground(this.backgrounds,t),this.set()},random:function(){this.currentBackground=jt.A.randomBackground(this.backgrounds),this.set()},solid:function(){this.currentBackground=jt.A.solidBackground(),this.set()},set:function(){this.$emit("bgChanged",this.currentBackground)},changeColor:function(t){this.selected=t,this.currentBackground=jt.A.setSolidColor(t),this.set()},colorSelected:function(t){this.selected=t.target.value,this.changeColor(this.selected)},themeSelected:function(t){var e=t.target.value;W.Z.save("theme",e),this.$emit("themeChanged",e)}}},$t=(0,y.Z)(At,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:280,name:"settings-background",title:"Appearance Settings"}},[n("div",{staticClass:"p-2"},[n("div",{staticClass:"group-box p-2 mb-3"},[n("div",{staticClass:"gb-label noselect"},[t._v("Background")]),t._v(" "),2===t.currentBackground.mode?n("div",{staticClass:"row palette no-gutters"},[t._l(t.palette,(function(e){return n("div",{staticClass:"col-auto"},[n("button",{staticClass:"color",style:{backgroundColor:e},on:{click:function(n){return t.changeColor(e)}}})])})),t._v(" "),n("div",{staticClass:"col-3"},[n("input",{staticClass:"d-block",domProps:{value:t.selected},on:{change:t.colorSelected}})])],2):n("win-memo",[n("p",[n("b",[t._v("Background:")]),t._v(" "+t._s(t.currentBackground.image.num)+"\n        ")]),t._v(" "),n("p",[n("b",[t._v("Source:")]),t._v(" "),""!==t.currentBackground.image.source_link?n("a",{attrs:{href:t.currentBackground.image.source_link}},[t._v("\n            "+t._s(t.currentBackground.image.source)+"\n          ")]):t._e()]),t._v(" "),n("p",[n("b",[t._v("Author:")]),t._v(" "),""!==t.currentBackground.image.author_link?n("a",{attrs:{href:t.currentBackground.image.author_link}},[t._v("\n            "+t._s(t.currentBackground.image.author)+"\n          ")]):t._e()])]),t._v(" "),n("div",{staticClass:"row no-gutters mt-2 noselect"},[n("div",{staticClass:"col-2 pr-1"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.next(-1)}}},[t._v("<")])],1),t._v(" "),n("div",{staticClass:"col-2 pr-1"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.next(1)}}},[t._v(">")])],1),t._v(" "),n("div",{staticClass:"col-4 pr-1"},[n("win-btn",{attrs:{block:""},on:{click:t.random}},[t._v("Random")])],1),t._v(" "),n("div",{staticClass:"col-4"},[n("win-btn",{class:{active:2===t.currentBackground.mode},attrs:{block:""},on:{click:t.solid}},[t._v("Solid")])],1)]),t._v(" "),n("div",{staticClass:"mt-1 noselect"},[n("small",[t._v("All background images were found on the Internet. Do you know the author? "),n("a",{attrs:{href:"mailto:mail@plaza.one"}},[t._v("Let us know!")])])])],1),t._v(" "),n("div",{staticClass:"group-box p-2 mb-2"},[n("div",{staticClass:"gb-label noselect"},[t._v("Theme")]),t._v(" "),n("div",{staticClass:"select"},[n("select",{on:{change:t.themeSelected}},t._l(t.themes,(function(e){return n("option",{domProps:{value:e[0],selected:t.theme===e[0],innerHTML:t._s(e[1])}})})),0)])]),t._v(" "),n("div",{staticClass:"text-center"},[n("win-btn",{staticClass:"mx-auto px-4",on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])])}),[],!1,null,null,null).exports,Et={data:function(){return{song:!1,isPlaying:!1,playTimeLeft:0}},props:{id:{type:String},name:{type:String}},computed:{songLength:function(){return this.dur(this.song.length)},playText:function(){return this.isPlaying?"Stop ("+this.dur(this.playTimeLeft)+")":"Play preview"},artwork:function(){var t;return null!==(t=this.song.artwork_sm_src)&&void 0!==t?t:"img/dead.jpg"}},mounted:function(){this.fetchSongInfo(this.id)},methods:{fetchSongInfo:function(t){var e=this;P.xO.get(t).then((function(t){e.song=t.data})).catch((function(t){e.alert(t.response.data.error,"Error"),e.closeWindow()}))},getVolume:function(){var t=W.Z.load("volume");return null===t?1:t/100},play:function(){this.isPlaying?this.stop():(this.$refs.audio.volume=this.getVolume(),this.$refs.audio.play())},stop:function(){this.isPlaying=!1,this.$refs.audio.pause(),this.$refs.audio.currentTime=0},onPlay:function(){this.isPlaying=!0},onPause:function(){this.isPlaying=!1},timeUpdated:function(){this.isPlaying&&(this.playTimeLeft=30-this.$refs.audio.currentTime)}},beforeDestroy:function(){this.isPlaying&&(this.stop(),this.$refs.audio=null)}},Zt=(0,y.Z)(Et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:360,name:t.name,title:"Song Info"}},[n("div",{staticClass:"p-2 song-info"},[!1!==t.song?n("div",[n("div",{staticClass:"group-box p-2 m-0"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"mb-1"},[n("div",{staticClass:"noselect"},[n("strong",[t._v("Artist:")]),n("br")]),t._v("\n              "+t._s(t.song.artist)+"\n            ")]),t._v(" "),n("div",{staticClass:"mb-1"},[n("div",{staticClass:"noselect"},[n("strong",[t._v("Album:")]),n("br")]),t._v("\n              "+t._s(t.song.album)+"\n            ")]),t._v(" "),n("div",{staticClass:"mb-2"},[n("div",{staticClass:"noselect"},[n("strong",[t._v("Title:")]),n("br")]),t._v("\n              "+t._s(t.song.title)+"\n            ")]),t._v(" "),n("div",[n("i",{staticClass:"i icon-clock"}),t._v(" "+t._s(t.songLength)+"  \n              "),n("i",{staticClass:"i icon-like",staticStyle:{color:"#c12727"}}),t._v(" "+t._s(t.song.likes)+"\n            ")])]),t._v(" "),n("div",{staticClass:"col-5"},[n("img",{staticClass:"artwork simple-border",attrs:{src:t.artwork,alt:"artwork"}})])])]),t._v(" "),n("div",{staticClass:"row justify-content-between mt-2"},[n("div",{staticClass:"col-5"},[n("audio",{ref:"audio",attrs:{src:t.song.preview_src},on:{pause:t.onPause,play:t.onPlay,timeupdate:t.timeUpdated}}),t._v(" "),n("win-btn",{attrs:{block:"",disabled:null===t.song.preview_src},on:{click:t.play}},[t._v(t._s(t.playText))])],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("win-btn",{staticClass:"px-4",on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])]):n("div",{staticClass:"text-center"},[t._v("Loading...")])]),t._v(" "),!1!==t.song?n("div",{staticClass:"statusbar row no-gutters noselect"},[t.song.first_played_at?n("div",{staticClass:"col cell"},[t._v("First played: "+t._s(t.sdy(t.song.first_played_at)))]):t._e()]):t._e()])}),[],!1,null,null,null).exports;function Dt(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}var Tt={methods:{open:function(t){this.openWindow(t),this.closeWindow()},logout:function(){var t,e=this;return(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.EA.logout();case 3:return t.prev=3,t.next=6,e.$store.dispatch("logout");case 6:return e.closeWindow(),t.finish(3);case 8:case"end":return t.stop()}}),t,null,[[0,,3,8]])})),function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){Dt(r,s,i,o,a,"next",t)}function a(t){Dt(r,s,i,o,a,"throw",t)}o(void 0)}))})()}}},Wt=Tt,zt=(0,y.Z)(Wt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:220,name:"user",title:"My Plaza"}},[n("div",{staticClass:"p-2 noselect"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-10 offset-1"},[t.isMobile?t._e():n("win-btn",{staticClass:"mb-2",attrs:{block:""},on:{click:function(e){return t.open("user-favorites")}}},[t._v("My Favorites")]),t._v(" "),n("win-btn",{staticClass:"mb-2",attrs:{block:""},on:{click:function(e){return t.open("user-email")}}},[t._v("Change Email")]),t._v(" "),n("win-btn",{staticClass:"mb-2",attrs:{block:""},on:{click:function(e){return t.open("user-password")}}},[t._v("Change Password")]),t._v(" "),n("win-btn",{staticClass:"mb-2",attrs:{block:""},on:{click:t.logout}},[t._v("Logout")]),t._v(" "),n("win-btn",{staticClass:"close mt-2 mx-auto",attrs:{block:""},on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])])])}),[],!1,null,null,null).exports;n(7727);function It(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}var Nt={data:function(){return{fields:{current_password:"",email:""},disabled:!0,sending:!1}},mounted:function(){this.fetchUser()},methods:{fetchUser:function(){var t,e=this;return(t=i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.EA.get();case 3:n=t.sent,e.fields.email=n.data.email,e.disabled=!1,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.alert("Can't fetch user data.","Failed"),e.closeWindow();case 12:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){It(r,s,i,o,a,"next",t)}function a(t){It(r,s,i,o,a,"throw",t)}o(void 0)}))})()},update:function(){var t=this;this.validate()&&!this.sending&&(this.sending=!0,P.EA.edit(this.fields).then((function(){t.$store.commit("email",t.fields.email),t.alert("Email has changed!","Success","info"),t.closeWindow("user-email")})).catch((function(e){t.alert(e.response.data.error,"Error")})).finally((function(){t.sending=!1})))},validate:function(){return 0!==this.fields.current_password.length||(this.alert("Enter current password.","Error"),!1)}}},Ut=Nt,Mt=(0,y.Z)(Ut,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:250,name:"user-email",title:"Change Email"}},[n("div",{staticClass:"py-2 px-3"},[n("label",{attrs:{for:"email"}},[t._v("Email:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.email,expression:"fields.email"}],staticClass:"d-block",attrs:{id:"email",disabled:t.disabled,type:"email"},domProps:{value:t.fields.email},on:{input:function(e){e.target.composing||t.$set(t.fields,"email",e.target.value)}}}),t._v(" "),n("label",{attrs:{for:"password"}},[t._v("Current password:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.current_password,expression:"fields.current_password"}],staticClass:"d-block mb-2",attrs:{id:"password",disabled:t.disabled,type:"password"},domProps:{value:t.fields.current_password},on:{input:function(e){e.target.composing||t.$set(t.fields,"current_password",e.target.value)}}}),t._v(" "),n("div",{staticClass:"row mt-3 no-gutters justify-content-between"},[n("div",{staticClass:"col-6"},[n("win-btn",{staticClass:"text-bold",attrs:{block:""},on:{click:t.update}},[t._v("Change")])],1),t._v(" "),n("div",{staticClass:"col-4"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])])])}),[],!1,null,null,null).exports;function Rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function Bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(n),!0).forEach((function(e){Lt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qt={data:function(){return{loading:!0,likes:[],deleted:[],total:0,perPage:25,pages:4,page:1}},computed:Bt(Bt({},(0,u.Se)("player",["currentSong","reaction"])),{},{showCurrentLike:function(){return!1}}),mounted:function(){this.fetchLikes(this.page)},methods:{fetchLikes:function(t){var e=this;this.$refs.list.scrollTop(),this.loading=!0,P.EA.favorites(t).then((function(t){e.perPage=t.data.per_page,e.pages=t.data.pages,e.likes=t.data.favorites,e.total=t.data.count,e.loading=!1,e.$refs.list.refreshScrollbar()})).catch((function(t){return e.alert(t.response.data.error,"Error")}))},changePage:function(t){this.page=t,this.fetchLikes(t)},deleteLike:function(t){var e=this;P.EA.deleteFavorite(t).then((function(n){e.deleted.push(t)})).catch((function(t){return e.alert(t.response.data.error,"Error")}))}},beforeDestroy:function(){this.likes=null}},Ft=(0,y.Z)(qt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:450,fluidHeight:"",name:"user-favorites",title:"My Favorites"}},[n("div",{staticClass:"content-fluid p-2"},[n("div",{staticClass:"d-flex flex-column h-100"},[n("div",{staticClass:"d-flex flex-grow-1 align-items-stretch"},[n("div",{staticClass:"w-100",staticStyle:{position:"relative"}},[t.loading?n("div",{staticClass:"content-loading noselect"}):t._e(),t._v(" "),n("win-list",{ref:"list",attrs:{scroll:""}},[t.likes.length>0&&!t.loading?[n("table",[t.showCurrentLike?n("tr",[n("td",{staticClass:"p-1 noselect",staticStyle:{width:"62px"}},[n("img",{attrs:{src:t.currentSong.artwork_src?t.currentSong.artwork_src:"img/dead.jpg",alt:"artwork"}})]),t._v(" "),n("td",{staticClass:"pl-1"},[n("div",{staticClass:"artist"},[t._v(t._s(t.currentSong.artist))]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(t.currentSong.title))]),t._v(" "),n("div",{staticClass:"date"},[n("i",[t._v("Now")])])]),t._v(" "),n("td",{staticClass:"noselect",staticStyle:{width:"70px"}})]):t._e(),t._v(" "),t._l(t.likes,(function(e,s){return n("tr",{staticClass:"hover",class:{strike:t.deleted.includes(e.id)}},[n("td",{staticClass:"p-1 noselect",staticStyle:{width:"62px"}},[n("img",{attrs:{src:e.song.artwork_src?e.song.artwork_src:"img/dead.jpg",alt:"artwork"}})]),t._v(" "),n("td",{staticClass:"pl-1 show-info",on:{click:function(n){return t.songInfo(e.song.id)}}},[n("div",{staticClass:"artist"},[t._v(t._s(e.song.artist))]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(e.song.title))]),t._v(" "),n("div",{staticClass:"date"},[n("i",[t._v(t._s(t.sdy(e.created_at)))])])]),t._v(" "),n("td",{staticClass:"text-center noselect",staticStyle:{width:"70px"}},[t.deleted.includes(e.song.id)?t._e():n("a",{staticClass:"link favorites-remove",attrs:{role:"button"},on:{click:function(n){return t.deleteLike(e.id)}}},[t._v("Remove")])])])}))],2),t._v(" "),n("div",{staticClass:"ps__rail-y noselect",staticStyle:{display:"block",top:"0",right:"0",height:"100%"}})]:t.loading?t._e():n("div",{staticClass:"favorites-empty noselect"},[n("i",[t._v("Your list is empty. Click the "),n("i",{staticClass:"i icon-like"}),t._v(" buton to add songs to this list.")])])],2)],1)]),t._v(" "),n("div",{staticClass:"d-flex"},[n("div",{staticClass:"row no-gutters pt-2 w-100"},[n("div",{staticClass:"col"},[n("win-pagination",{attrs:{pages:t.pages},on:{change:t.changePage}})],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("win-btn",{staticClass:"px-4",on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])])])]),t._v(" "),n("div",{staticClass:"statusbar row no-gutters song-list-statusbar noselect"},[n("div",{staticClass:"col-3 cell d"},[t._v("Pages: "+t._s(t.pages))]),t._v(" "),n("div",{staticClass:"col cell"},[t._v("Songs: "+t._s(t.total))])])])}),[],!1,null,null,null).exports;function Ht(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}var Qt={data:function(){return{fields:{username:"",password:""},remember:!1}},mounted:function(){this.sending=!1},methods:{login:function(){var t,e=this;return(t=i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validate()&&!e.sending){t.next=2;break}return t.abrupt("return");case 2:return e.sending=!0,t.prev=3,t.next=6,P.EA.auth(e.fields);case 6:if(n=t.sent,!e.isMobile){t.next=13;break}return t.next=10,e.$store.dispatch("login",n.data);case 10:e.alert("Authentication successful!","Success","info"),t.next=15;break;case 13:return t.next=15,e.$store.dispatch("login",{user:n.data,remember:e.remember});case 15:e.closeWindow(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(3),e.alert(t.t0.response.data.error,"Failed");case 21:return t.prev=21,e.sending=!1,t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[3,18,21,24]])})),function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){Ht(r,s,i,o,a,"next",t)}function a(t){Ht(r,s,i,o,a,"throw",t)}o(void 0)}))})()},openRegister:function(){this.openWindow("user-register"),this.closeWindow()},openReset:function(){this.openWindow("user-reset"),this.closeWindow()},validate:function(){return 0!==this.fields.username.length&&0!==this.fields.password.length||(this.alert("Wrong username or password.","Error"),!1)}}},Vt=Qt,Yt=(0,y.Z)(Vt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:480,name:"user-login",title:"Sign In"}},[n("div",{staticClass:"noselect"},[n("div",{staticClass:"row no-gutters p-2"},[n("div",{staticClass:"col-12 d-block d-sm-none mb-3 p-0"},[t._v("\n        Type a username and password to sign in to the Nightwave Plaza.\n      ")]),t._v(" "),n("div",{staticClass:"col-auto d-none d-sm-block pr-3"},[n("img",{staticClass:"img-key",attrs:{alt:"",height:"48",src:"img/win/key.png",width:"45"}})]),t._v(" "),n("div",{staticClass:"col pl-0 pr-2"},[n("div",{staticClass:"row no-gutters d-none d-sm-block mb-2"},[n("div",{staticClass:"col-12"},[t._v("\n            Type a username and password to log in to Nightwave Plaza.\n          ")])]),t._v(" "),n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-12 col-sm-3 align-self-center"},[n("label",{staticClass:"mt-0",attrs:{for:"username"}},[n("u",[t._v("U")]),t._v("sername:")])]),t._v(" "),n("div",{staticClass:"col-12 col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.username,expression:"fields.username"}],staticClass:"mr-0 ml-0",attrs:{id:"username",type:"text"},domProps:{value:t.fields.username},on:{input:function(e){e.target.composing||t.$set(t.fields,"username",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mt-1 no-gutters"},[n("div",{staticClass:"col-12 col-sm-3 align-self-center"},[n("label",{staticClass:"mt-0",attrs:{for:"password"}},[n("u",[t._v("P")]),t._v("assword:")])]),t._v(" "),n("div",{staticClass:"col-12 col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.password,expression:"fields.password"}],staticClass:"mr-0 ml-0",attrs:{id:"password",type:"password"},domProps:{value:t.fields.password},on:{input:function(e){e.target.composing||t.$set(t.fields,"password",e.target.value)}}}),t._v("\n             "),n("a",{attrs:{role:"button"},on:{click:t.openReset}},[t._v("Reset")])])]),t._v(" "),t.isMobile?t._e():n("div",{staticClass:"row mt-1 no-gutters justify-content-end"},[n("div",{staticClass:"col-12 col-sm-9"},[n("div",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.remember,expression:"remember"}],attrs:{id:"remember",type:"checkbox"},domProps:{checked:Array.isArray(t.remember)?t._i(t.remember,null)>-1:t.remember},on:{change:function(e){var n=t.remember,s=e.target,i=!!s.checked;if(Array.isArray(n)){var r=t._i(n,null);s.checked?r<0&&(t.remember=n.concat([null])):r>-1&&(t.remember=n.slice(0,r).concat(n.slice(r+1)))}else t.remember=i}}}),t._v(" "),n("label",{attrs:{for:"remember"}},[t._v("Remember me")])])])])]),t._v(" "),n("div",{staticClass:"col-auto col-sm-2 p-0 login-buttons"},[n("win-btn",{staticClass:"mb-2 text-bold",on:{click:t.login}},[t._v("Sign In")]),t._v(" "),n("win-btn",{staticClass:"mb-2",on:{click:t.openRegister}},[t._v("Register")]),t._v(" "),n("win-btn",{on:{click:function(e){return t.closeWindow()}}},[t._v("Cancel")])],1)])])])}),[],!1,null,null,null).exports;function Jt(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}var Gt={data:function(){return{fields:{current_password:"",password:""},password_repeat:"",sending:!1}},methods:{change:function(){var t,e=this;return(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validate()&&!e.sending){t.next=2;break}return t.abrupt("return");case 2:return e.sending=!0,t.prev=3,t.next=6,P.EA.edit(e.fields);case 6:return t.next=8,e.$store.dispatch("logout");case 8:e.alert("Password has changed!","Success","info"),e.closeWindow(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),e.alert(t.t0.response.data.error,"Error");case 15:return t.prev=15,e.sending=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,12,15,18]])})),function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){Jt(r,s,i,o,a,"next",t)}function a(t){Jt(r,s,i,o,a,"throw",t)}o(void 0)}))})()},validate:function(){return 0===this.fields.current_password.length?(this.alert("Enter current password.","Error"),!1):this.fields.password.length<3?(this.alert("Password too short.","Error"),!1):this.fields.password===this.password_repeat||(this.alert("Passwords didn't match.","Error"),!1)}}},Kt=Gt,Xt=(0,y.Z)(Kt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:250,name:"user-password",title:"Change Password"}},[n("div",{staticClass:"py-2"},[n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-10 offset-1"},[n("label",{attrs:{for:"current_password"}},[t._v("Current password:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.current_password,expression:"fields.current_password"}],staticClass:"d-block mb-2",attrs:{id:"current_password",type:"password"},domProps:{value:t.fields.current_password},on:{input:function(e){e.target.composing||t.$set(t.fields,"current_password",e.target.value)}}}),t._v(" "),n("label",{attrs:{for:"password"}},[t._v("New password:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.password,expression:"fields.password"}],staticClass:"d-block mb-2",attrs:{id:"password",type:"password"},domProps:{value:t.fields.password},on:{input:function(e){e.target.composing||t.$set(t.fields,"password",e.target.value)}}}),t._v(" "),n("label",{attrs:{for:"password_repeat"}},[t._v("Password repeat:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password_repeat,expression:"password_repeat"}],staticClass:"d-block",attrs:{id:"password_repeat",type:"password"},domProps:{value:t.password_repeat},on:{input:function(e){e.target.composing||(t.password_repeat=e.target.value)}}}),t._v(" "),n("div",{staticClass:"row mt-2 no-gutters justify-content-between"},[n("div",{staticClass:"col-6"},[n("win-btn",{staticClass:"text-bold",attrs:{block:""},on:{click:t.change}},[t._v("Change")])],1),t._v(" "),n("div",{staticClass:"col-4"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])])])])])}),[],!1,null,null,null).exports;function te(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function ee(t){return function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){te(r,s,i,o,a,"next",t)}function a(t){te(r,s,i,o,a,"throw",t)}o(void 0)}))}}var ne={props:{direct:{type:Boolean,default:!1}},data:function(){return{fields:{username:"",email:"",password:"",key:"",captcha:""},registered:!1,passwordR:"",captchaImage:""}},computed:{closeText:function(){return this.registered?"Finish":"Cancel"}},mounted:function(){var t=this;return ee(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.sending=!1;case 1:case"end":return e.stop()}}),e)})))()},methods:{refreshCaptcha:function(t){var e=this;return ee(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.fields.key=t,e.fields.captcha="";case 2:case"end":return n.stop()}}),n)})))()},register:function(){var t=this;this.validate()&&!this.sending&&(this.sending=!0,P.EA.register(this.fields).then((function(){t.registered=!0})).catch((function(e){t.alert(e.response.data.error,"Error"),t.$refs.captcha.refresh()})).finally((function(){t.sending=!1})))},validate:function(){return/[^a-zA-Z0-9-_]+/.test(this.fields.username)?(this.alert("Incorrect username. Only letters, numbers and underscores allowed.","Error"),!1):this.fields.username.length<4?(this.alert("Username is too short.","Error"),!1):this.fields.username.length>32?(this.alert("Username is too long.","Error"),!1):this.fields.password.length<3?(this.alert("Password is too short.","Error"),!1):this.fields.email.length<3?(this.alert("Email is too short.","Error"),!1):this.fields.password===this.passwordR||(this.alert("Passwords don't match.","Error"),!1)},close:function(){this.direct?this.$router.push({name:"index"}):this.closeWindow()}},beforeDestroy:function(){this.$refs.captcha=null}},se=(0,y.Z)(ne,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:430,name:"user-register",title:"Registration"}},[n("div",{staticClass:"p-2 noselect"},[n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-sm-4 d-none d-sm-block"},[n("img",{staticClass:"img-register",attrs:{alt:"register",src:"img/win/register.png"}})]),t._v(" "),n("div",{staticClass:"col-12 col-sm-8 d-flex flex-column"},[n("div",{staticClass:"d-flex flex-grow-1 flex-column mb-fix"},[t.registered?[n("p",{staticClass:"lead"},[t._v("Registration complete")]),t._v(" "),n("p",{staticClass:"my-2"},[t._v("Welcome to Nightwave Plaza, "),n("strong",[t._v(t._s(t.fields.username))]),t._v("!")]),t._v(" "),n("p",[t._v("Now you use the like button.")])]:[n("p",{staticClass:"lead"},[t._v("User Information:")]),t._v(" "),n("p",{staticClass:"mt-2 mb-3"},[t._v("Please fill out the registration form. All fields are required.")]),t._v(" "),n("div",{staticClass:"row no-gutters mb-2"},[n("div",{staticClass:"col-5 align-self-center"},[n("label",{attrs:{for:"register-username"}},[n("u",[t._v("U")]),t._v("sername:")])]),t._v(" "),n("div",{staticClass:"col-7"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.username,expression:"fields.username"}],staticClass:"d-block m-0",attrs:{id:"register-username",tabindex:"1",type:"text"},domProps:{value:t.fields.username},on:{input:function(e){e.target.composing||t.$set(t.fields,"username",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row no-gutters mb-2"},[n("div",{staticClass:"col-5 align-self-center"},[n("label",{attrs:{for:"register-password"}},[n("u",[t._v("P")]),t._v("assword:")])]),t._v(" "),n("div",{staticClass:"col-7"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.password,expression:"fields.password"}],staticClass:"d-block m-0",attrs:{id:"register-password",tabindex:"2",type:"password"},domProps:{value:t.fields.password},on:{input:function(e){e.target.composing||t.$set(t.fields,"password",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row no-gutters mb-2"},[n("div",{staticClass:"col-5 align-self-center"},[n("label",{attrs:{for:"register-password-repeat"}},[n("u",[t._v("P")]),t._v("assword repeat:")])]),t._v(" "),n("div",{staticClass:"col-7"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordR,expression:"passwordR"}],staticClass:"d-block m-0",attrs:{id:"register-password-repeat",tabindex:"3",type:"password"},domProps:{value:t.passwordR},on:{input:function(e){e.target.composing||(t.passwordR=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row no-gutters mb-2"},[n("div",{staticClass:"col-5 align-self-center"},[n("label",{attrs:{for:"register-email"}},[n("u",[t._v("E")]),t._v("mail:")])]),t._v(" "),n("div",{staticClass:"col-7"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.email,expression:"fields.email"}],staticClass:"d-block m-0",attrs:{id:"register-email",tabindex:"4",type:"email"},domProps:{value:t.fields.email},on:{input:function(e){e.target.composing||t.$set(t.fields,"email",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-5 align-self-center"},[n("label",{staticClass:"mb-1",attrs:{for:"register-captcha"}},[n("u",[t._v("C")]),t._v("aptcha:")])]),t._v(" "),n("div",{staticClass:"col-2 align-self-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.captcha,expression:"fields.captcha"}],staticClass:"d-block m-0",attrs:{id:"register-captcha",tabindex:"5",type:"text"},domProps:{value:t.fields.captcha},on:{input:function(e){e.target.composing||t.$set(t.fields,"captcha",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"col-5"},[n("div",{staticClass:"pl-2"},[n("win-captcha",{ref:"captcha",on:{refresh:t.refreshCaptcha}})],1)])])]],2),t._v(" "),n("div",{staticClass:"d-flex flex-grow-0"},[n("div",{staticClass:"row no-gutters mt-2 justify-content-between flex-grow-1 mb-fix"},[n("div",{staticClass:"col-4"},[t.registered?t._e():n("win-btn",{staticClass:"text-bold",attrs:{block:""},on:{click:t.register}},[t._v("Register")])],1),t._v(" "),n("div",{staticClass:"col-4"},[n("win-btn",{attrs:{block:""},on:{click:t.close}},[t._v(t._s(t.closeText))])],1)])])])])])])}),[],!1,null,null,null).exports;function ie(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function re(t){return function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){ie(r,s,i,o,a,"next",t)}function a(t){ie(r,s,i,o,a,"throw",t)}o(void 0)}))}}var oe={data:function(){return{fields:{email:"",key:"",captcha:""},sending:!1}},methods:{reset:function(){var t=this;return re(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validate()&&!t.sending){e.next=2;break}return e.abrupt("return");case 2:return t.sending=!0,e.prev=3,e.next=6,P.EA.reset(t.fields);case 6:t.alert("Instructions have been sent to your email.","Success","info"),t.closeWindow(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),t.alert(e.t0.response.data.error,"Error"),t.$refs.captcha.refresh();case 14:return e.prev=14,t.sending=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,10,14,17]])})))()},validate:function(){return 0!==this.fields.email.length||(this.alert("Enter email.","Error"),!1)},refreshCaptcha:function(t){var e=this;return re(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.fields.key=t,e.fields.captcha="";case 2:case"end":return n.stop()}}),n)})))()}}},ae=(0,y.Z)(oe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:250,name:"user-reset",title:"Reset password"}},[n("div",{staticClass:"py-2"},[n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-10 offset-1"},[n("label",{attrs:{for:"email"}},[t._v("Enter your Email:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.email,expression:"fields.email"}],staticClass:"d-block mb-2",attrs:{id:"email",type:"email"},domProps:{value:t.fields.email},on:{input:function(e){e.target.composing||t.$set(t.fields,"email",e.target.value)}}}),t._v(" "),n("label",{attrs:{for:"captcha"}},[t._v("Captcha:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.captcha,expression:"fields.captcha"}],staticClass:"d-block mb-2",attrs:{id:"captcha",type:"text"},domProps:{value:t.fields.captcha},on:{input:function(e){e.target.composing||t.$set(t.fields,"captcha",e.target.value)}}}),t._v(" "),n("win-captcha",{ref:"captcha",on:{refresh:t.refreshCaptcha}}),t._v(" "),n("div",{staticClass:"row mt-2 no-gutters justify-content-between"},[n("div",{staticClass:"col-6"},[n("win-btn",{staticClass:"text-bold",attrs:{block:""},on:{click:t.reset}},[t._v("Reset")])],1),t._v(" "),n("div",{staticClass:"col-4"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])],1)])])])}),[],!1,null,null,null).exports;r.Z.component("window-about",wt),r.Z.component("window-alert",bt),r.Z.component("window-credits",_t),r.Z.component("window-history",Ct),r.Z.component("window-news",Pt),r.Z.component("window-ratings",St),r.Z.component("window-settings-background",$t),r.Z.component("window-song",Zt),r.Z.component("window-user",zt),r.Z.component("window-user-email",Mt),r.Z.component("window-user-favorites",Ft),r.Z.component("window-user-login",Yt),r.Z.component("window-user-password",Xt),r.Z.component("window-user-register",se),r.Z.component("window-user-reset",ae);function ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(n),!0).forEach((function(e){ue(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var de={computed:le(le(le({},(0,u.Se)(["sleepTime","isPlaying"])),(0,u.Se)("player",["currentSong"])),{},{artwork:function(){return this.currentSong.id&&this.currentSong.artwork_src?this.currentSong.artwork_src:"img/dead.jpg"},playText:function(){return this.isPlaying?"Stop":"Play"},timerColor:function(){return 0!==this.sleepTime?"#3455DB":""}}),methods:{play:function(){this.isPlaying?(d._.audioStop(),this.closeWindow("player-timer")):d._.audioPlay()},openDrawer:function(){d._.openDrawer()}}},pe=(0,y.Z)(de,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-12 col-sm-auto align-self-center mb-2 mb-sm-0"},[n("div",{staticClass:"cover simple-border noselect"},[n("img",{attrs:{src:t.artwork,alt:"artwork"}})])]),t._v(" "),n("div",{staticClass:"col-12 col-sm"},[n("div",{staticClass:"player-meta pl-sm-2"},[n("div",{staticClass:"player-artist track-artist mb-2"},[t._v(t._s(t.currentSong.artist))]),t._v(" "),n("div",{staticClass:"player-title track-title"},[t._v(t._s(t.currentSong.title))]),t._v(" "),n("div",{staticClass:"row my-1 my-sm-2 py-1 no-gutters noselect"},[n("div",{staticClass:"col-12 col-md-6 pr-0"},[n("div",{staticClass:"text-field p-0 m-0 player-time-container"},[n("win-player-time",{ref:"time"})],1)])]),t._v(" "),n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"mb-1 mb-sm-0 pr-2",class:{"col-6":!t.isPlaying,"col-4":t.isPlaying}},[n("win-btn",{staticClass:"player-play",attrs:{block:""},on:{click:function(e){return t.play()}}},[t._v(t._s(t.playText))])],1),t._v(" "),t.isPlaying?n("div",{staticClass:"col-2 mb-1 mb-sm-0 pr-2"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.openWindow("player-timer")}}},[n("i",{staticClass:"i icon-clock",style:{color:t.timerColor}})])],1):t._e(),t._v(" "),n("div",{staticClass:"col-3 pr-2"},[n("win-player-reactions")],1),t._v(" "),n("div",{staticClass:"col-3 mb-1 mb-sm-0"},[n("win-btn",{staticClass:"btn-start",attrs:{block:""},on:{click:t.openDrawer}},[t._v(" ")])],1)])])]),t._v(" "),n("win-player-status",{ref:"status"})],1)}),[],!1,null,null,null).exports;function fe(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function ve(t){return function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){fe(r,s,i,o,a,"next",t)}function a(t){fe(r,s,i,o,a,"throw",t)}o(void 0)}))}}function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function me(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var we={computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach((function(e){me(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,u.Se)("player",["currentSong"])),created:function(){this.statusUpdatedAt=0,this.requestSentAt=0,this.osdUpdatedAt=0,this.updating=!1,this.tickerId=l.set(this.tick,1e3)},mounted:function(){var t=this;this.$store.subscribe((function(e,n){"pushData"===e.type&&("status"===e.payload.name&&t.setStatus(n.data.status),"artwork"===e.payload.name&&t.setArtwork(n.data.artwork),"reactionUpdate"===e.payload.name&&(t.$store.commit("player/reaction",n.data.reactionUpdate.score),t.updateOsd()))})),this.tick()},methods:{tick:function(){var t=this;return ve(i().mark((function e(){var n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Date.now(),s=t.currentSong.position+Math.floor((n-t.statusUpdatedAt)/1e3),t.currentSong.id){e.next=7;break}return e.next=5,t.requestUpdate();case 5:case 10:e.next=15;break;case 7:if(!(n-t.osdUpdatedAt>1e4)){e.next=12;break}return e.next=10,t.updateOsd();case 12:if(!(t.currentSong.length-s<3)){e.next=15;break}return e.next=15,t.requestUpdate();case 15:case"end":return e.stop()}}),e)})))()},requestUpdate:function(){var t=this;return ve(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=Date.now())-t.requestSentAt>=1e3)){e.next=5;break}return t.requestSentAt=n,e.next=5,d._.requestUiUpdate();case 5:case"end":return e.stop()}}),e)})))()},updateOsd:function(){var t=this;return ve(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.updating){e.next=2;break}return e.abrupt("return");case 2:return t.updating=!0,n=[],e.prev=4,e.next=7,P.i7.getOsd();case 7:n=e.sent.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("Failed to update status: ".concat(e.t0));case 13:return e.prev=13,t.updating=!1,t.osdUpdatedAt=Date.now(),e.finish(13);case 17:if(n[0]===t.currentSong.id){e.next=22;break}return e.next=20,t.requestUpdate();case 20:e.next=24;break;case 22:t.$store.commit("player/listeners",n[1]),t.$store.commit("player/reactions",n[2]);case 24:case"end":return e.stop()}}),e,null,[[4,10,13,17]])})))()},setStatus:function(t){var e=this;return ve(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("{}"!==JSON.stringify(t)&&0!==t.updated&&""!==t.id){n.next=2;break}return n.abrupt("return");case 2:t.id!==e.currentSong.id&&(e.$store.commit("player/currentSong",{id:t.id,artist:t.artist,title:t.title,position:t.position,length:t.length,artwork_src:t.artwork_src,reactions:t.likes}),e.$store.commit("player/listeners",t.listeners),e.osdUpdatedAt=Date.now()),e.$store.commit("isPlaying",t.isPlaying),e.$store.commit("sleepTime",t.sleepTime),e.statusUpdatedAt=Date.now();case 6:case"end":return n.stop()}}),n)})))()},setArtwork:function(t){this.currentSong.id&&this.$store.commit("player/artwork",t)}}},ge=we,be=(0,y.Z)(ge,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports;r.Z.component("win-player",pe),r.Z.component("win-player-status",be);var _e=(0,y.Z)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:450,name:"donate",title:"Support Us"}},[n("div",{staticClass:"p-2"},[n("div",{staticClass:"text-center"},[n("win-memo",[n("p",{staticClass:"lead mb-2"},[t._v("Love Nightwave Plaza?")]),t._v(" "),n("p",[t._v("You can support the radio station and further updates.")]),t._v(" "),n("p",[t._v("You will not receive any in-app rewards by donating to us, but we will see your love and appreciation. <3")]),t._v(" "),n("p",{staticClass:"my-2"},[n("a",{staticClass:"btn p-3",attrs:{href:"https://plaza.one/donate",target:"_blank"}},[t._v("Go to Nightwave Plaza website")])])])],1),t._v(" "),n("div",{staticClass:"text-center mt-2"},[n("win-btn",{staticClass:"mx-auto px-4",on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])])}),[],!1,null,null,null).exports,ye={data:function(){return{movedAt:0,direction:3,left:0,loading:!0,style:{transform:"translate(0px, 0px)"}}},mounted:function(){this.$store.commit("windows/pullUp","loading"),this.move()},beforeDestroy:function(){this.$store.commit("windows/pullUp","player")},destroyed:function(){this.loading=!1},methods:{move:function(){if(this.loading){var t=Date.now();t-this.movedAt>30&&this.$refs.bar&&((this.left>this.$refs.bar.offsetWidth-this.$refs.progress.offsetWidth-6||this.left<0)&&(this.direction*=-1),this.left+=this.direction,this.style.transform="translate(".concat(this.left,"px, 0px)"),this.movedAt=t),requestAnimationFrame(this.move)}}}},ke=(0,y.Z)(ye,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{attrs:{width:220,name:"loading",title:"Nightwave Plaza"},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"buttons"})]},proxy:!0}])},[t._v(" "),n("div",{staticClass:"p-3"},[n("p",{staticClass:"text-center"},[n("strong",[t._v("Loading...")])]),t._v(" "),n("div",{ref:"bar",staticClass:"text-field progress-bar"},[n("div",{ref:"progress",staticClass:"progress",style:t.style},[n("div"),n("div"),n("div")])])])])}),[],!1,null,null,null).exports;function Ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function xe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pe={computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ce(Object(n),!0).forEach((function(e){xe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,u.Se)("player",["listeners"])),methods:{minimize:function(){this.$store.dispatch("windows/minimize","player")},toggleFullscreen:function(){d._.toggleFullscreen()}}},Oe=Pe,Se=(0,y.Z)(Oe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{attrs:{name:"player",title:"Nightwave Plaza",width:400},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"buttons"},[n("win-btn",{staticClass:"button-minimize",on:{click:t.minimize}},[n("span")]),t._v(" "),n("win-btn",{staticClass:"button-maximize",on:{click:t.toggleFullscreen}},[n("span")])],1)]},proxy:!0}])},[t._v(" "),n("div",{staticClass:"content p-2"},[n("win-player")],1),t._v(" "),n("div",{staticClass:"statusbar row no-gutters"},[n("div",{staticClass:"col cell"},[t._v("\n      Listeners: "+t._s(t.listeners)+"\n    ")])])])}),[],!1,null,null,null).exports;function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(Object(n),!0).forEach((function(e){$e(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ee(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}var Ze={data:function(){return{minutes:20,timeText:0}},mounted:function(){var t,e=this;return(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.tickerId=l.set(e.refreshText,1e3);case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){Ee(r,s,i,o,a,"next",t)}function a(t){Ee(r,s,i,o,a,"throw",t)}o(void 0)}))})()},beforeDestroy:function(){l.stop(this.tickerId)},methods:{start:function(){this.active?d._.setSleepTimer(0):(this.add(0),d._.setSleepTimer(this.minutes)),this.closeWindow()},refreshText:function(){var t=(this.sleepTime-Date.now())/1e3;this.timeText=t<0?"00:00":this.dur(t)},add:function(t){var e=parseInt(this.minutes);e=e?e+t:0,this.minutes=e<=0?1:e}},computed:Ae(Ae({},(0,u.Se)(["sleepTime"])),{},{active:function(){return 0!==this.sleepTime},btnText:function(){return 0!==this.sleepTime?"Stop":"Start"}})},De=Ze,Te=(0,y.Z)(De,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:250,name:"player-timer",title:"Sleep Timer"}},[n("div",{staticClass:"p-3"},[t.active?n("p",{staticClass:"text-center"},[t._v("\n      Sleep timer is active "),n("br"),t._v(" "),n("b",[t._v(t._s(t.timeText))])]):n("div",{staticClass:"text-center"},[n("p",{staticClass:"text-center"},[t._v("Set the time for the sleep timer. The music will stop automatically.")]),t._v(" "),n("div",{staticClass:"row no-gutters mt-3"},[n("div",{staticClass:"col-2 pr-1"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.add(-10)}}},[t._v("-10")])],1),t._v(" "),n("div",{staticClass:"col-2 pr-1"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.add(-5)}}},[t._v("-5")])],1),t._v(" "),n("div",{staticClass:"col-4 pr-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.minutes,expression:"minutes"}],staticClass:"d-block text-center",attrs:{onkeypress:"if(this.value.length > 3){return false;}",type:"number"},domProps:{value:t.minutes},on:{input:function(e){e.target.composing||(t.minutes=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"col-2 pr-1"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.add(5)}}},[t._v("+5")])],1),t._v(" "),n("div",{staticClass:"col-2"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.add(10)}}},[t._v("+10")])],1)])]),t._v(" "),n("div",{staticClass:"row mt-3 no-gutters justify-content-between"},[n("div",{staticClass:"col-6"},[n("win-btn",{staticClass:"text-bold",attrs:{block:""},on:{click:function(e){return t.start()}}},[t._v(t._s(t.btnText))])],1),t._v(" "),n("div",{staticClass:"col-4"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.closeWindow()}}},[t._v("Close")])],1)])])])}),[],!1,null,null,null).exports;function We(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}var ze={data:function(){return{audioQuality:0}},computed:{quality:function(){return 1===this.audioQuality?"Eco":"High"}},mounted:function(){var t,e=this;return(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d._.getAudioQuality();case 2:e.audioQuality=t.sent;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){We(r,s,i,o,a,"next",t)}function a(t){We(r,s,i,o,a,"throw",t)}o(void 0)}))})()},methods:{open:function(t){this.openWindow(t),this.$refs.window.close()},switchAudioQuality:function(){this.audioQuality=+!this.audioQuality,d._.setAudioQuality(this.audioQuality)}}},Ie=ze,Ne=(0,y.Z)(Ie,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win-window",{ref:"window",attrs:{width:220,name:"settings",title:"Settings"}},[n("div",{staticClass:"p-2 noselect"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-10 offset-1"},[n("win-btn",{staticClass:"mb-2",attrs:{block:""},on:{click:function(e){return t.open("settings-background")}}},[t._v("Appearance settings")]),t._v(" "),n("win-btn",{staticClass:"mb-2",attrs:{block:""},on:{click:t.switchAudioQuality}},[t._v("Audio quality: "),n("strong",[t._v(t._s(t.quality))])])],1)]),t._v(" "),n("div",{staticClass:"row no-gutters justify-content-center"},[n("div",{staticClass:"col-6"},[n("win-btn",{attrs:{block:""},on:{click:function(e){return t.$refs.window.close()}}},[t._v("Close")])],1)])])])}),[],!1,null,null,null).exports;function Ue(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}r.Z.component("window-donate",_e),r.Z.component("window-loading",ke),r.Z.component("window-player",Se),r.Z.component("window-player-timer",Te),r.Z.component("window-settings",Ne),r.Z.component("app",n(6177).Z),r.Z.mixin(n(3879).Z),r.Z.mixin(n(7115).Z),window.Vue=new r.Z({store:m,created:function(){window.plaza.vue=this},mounted:function(){var t,e=this;return(t=i().mark((function t(){var n,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return requestAnimationFrame(e.tick),t.next=3,d._.getAuthToken();case 3:return n=t.sent,t.next=6,d._.getUserAgent();case 6:s=t.sent,e.$store.commit("user/token",n),e.$store.commit("user/agent",s);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){Ue(r,s,i,o,a,"next",t)}function a(t){Ue(r,s,i,o,a,"throw",t)}o(void 0)}))})()},methods:{pushData:function(t,e){this.$store.commit("pushData",{name:t,data:e})},tick:function(){l.tick(),requestAnimationFrame(this.tick)}}}).$mount("#app")},4645:function(t,e,n){n.d(e,{_:function(){return c}});var s={getStatus:function(){return JSON.parse(AndroidInterface.getStatus())},requestUiUpdate:function(){return AndroidInterface.requestUiUpdate()},audioPlay:function(){return AndroidInterface.audioPlay()},audioStop:function(){return AndroidInterface.audioStop()},setSleepTimer:function(t){return AndroidInterface.setSleepTimer(t)},getAuthToken:function(){return AndroidInterface.getAuthToken()},setAuthToken:function(t){return AndroidInterface.setAuthToken(t)},getAudioQuality:function(){return AndroidInterface.getAudioQuality()},setAudioQuality:function(t){return AndroidInterface.setAudioQuality(t)},toggleFullscreen:function(){return AndroidInterface.toggleFullscreen()},openDrawer:function(){return AndroidInterface.openDrawer()},getUserAgent:function(){return AndroidInterface.getUserAgent()},getAppVersion:function(){return AndroidInterface.getVersion()},setBackground:function(t){return AndroidInterface.setBackground(t)},setReaction:function(t){return AndroidInterface.setReaction(t)},getReaction:function(){return JSON.parse(AndroidInterface.getReaction())}},i=(n(1539),n(8674),n(5934)),r="ios-callback",o={getStatus:function(){return a("getStatus")},requestUiUpdate:function(){return a("requestUiUpdate")},audioPlay:function(){return a("audioPlay")},audioStop:function(){return a("audioStop")},setSleepTimer:function(t){return a("setSleepTimer",["".concat(t)])},getAuthToken:function(){return a("getAuthToken")},setAuthToken:function(t){return a("setAuthToken",[t])},getAudioQuality:function(){return a("getAudioQuality")},setAudioQuality:function(t){return a("setAudioQuality",["".concat(t)])},toggleFullscreen:function(){return a("toggleFullscreen")},openDrawer:function(){return a("openDrawer")},getUserAgent:function(){return a("getUserAgent")},getAppVersion:function(){return a("getAppVersion")},setBackground:function(t){return a("setBackground",[t])},setReaction:function(t){return a("setReaction",["".concat(t)])},getReaction:function(){return a("getReaction")}};function a(t,e){if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.plaza){var n=i.Z();return window.webkit.messageHandlers.plaza.postMessage({name:t,args:e||[],callbackId:n}),window[r]||(window[r]={}),new Promise((function(t,e){window[r][n]=function(n,s){s?e(new Error(s)):t(n)}}))}console.error("Unable to send message to iOS. Message handler not found")}var c={getStatus:function(){return l().getStatus()},requestUiUpdate:function(){return l().requestUiUpdate()},audioPlay:function(){return l().audioPlay()},audioStop:function(){return l().audioStop()},setSleepTimer:function(t){return l().setSleepTimer(t)},getAuthToken:function(){return l().getAuthToken()},setAuthToken:function(t){return l().setAuthToken(t)},getAudioQuality:function(){return l().getAudioQuality()},setAudioQuality:function(t){return l().setAudioQuality(t)},toggleFullscreen:function(){return l().toggleFullscreen()},openDrawer:function(){return l().openDrawer()},getUserAgent:function(){return l().getUserAgent()},getAppVersion:function(){return l().getAppVersion()},setBackground:function(t){return l().setBackground(t)},setReaction:function(t){return l().setReaction(t)},getReaction:function(t){return l().getReaction(t)}},l=function(){return"undefined"!=typeof AndroidInterface?s:o}},439:function(){},1441:function(){},6177:function(t,e,n){n.d(e,{Z:function(){return h}});n(9070),n(7941),n(2526),n(7327),n(1539),n(5003),n(9554),n(4747),n(9337),n(3321),n(8674);var s=n(7757),i=n.n(s),r=n(1703),o=n(629),a=n(6646),c=n(4645);function l(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){l(r,s,i,o,a,"next",t)}function a(t){l(r,s,i,o,a,"throw",t)}o(void 0)}))}}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v={data:function(){return{styles:{backgroundColor:"transparent"},theme:"theme-win98"}},computed:p(p(p({},(0,o.Se)("windows",["isWindowOpen"])),(0,o.Se)("player",["currentSong"])),{},{loading:function(){return""===this.currentSong.id}}),mounted:function(){var t=this;return u(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.themeChanged(a.Z.load("theme")),e.next=3,r.A.loadOnStartup();case 3:return n=e.sent,e.next=6,t.setBackground(n);case 6:case"end":return e.stop()}}),e)})))()},methods:{setBackground:function(t){var e=this;return u(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.styles.backgroundColor=2===t.mode?t.color:"transparent",n.next=3,c._.setBackground(2===t.mode?"solid":t.image.video_src);case 3:case"end":return n.stop()}}),n)})))()},themeChanged:function(t){this.theme=t?"theme-"+t:"theme-win98"}}},h=(0,n(1900).Z)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-desktop",class:t.theme,style:t.styles},[t.loading?n("window-loading"):t._e(),t._v(" "),n("window-player",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]}),t._v(" "),t.isWindowOpen("player-timer")?n("window-player-timer"):t._e(),t._v(" "),t.isWindowOpen("about")?n("window-about"):t._e(),t._v(" "),t.isWindowOpen("credits")?n("window-credits"):t._e(),t._v(" "),t.isWindowOpen("history")?n("window-history"):t._e(),t._v(" "),t.isWindowOpen("ratings")?n("window-ratings"):t._e(),t._v(" "),t.isWindowOpen("settings")?n("window-settings"):t._e(),t._v(" "),t.isWindowOpen("settings-background")?n("window-settings-background",{on:{bgChanged:t.setBackground,themeChanged:t.themeChanged}}):t._e(),t._v(" "),t.isWindowOpen("donate")?n("window-donate"):t._e(),t._v(" "),t.isWindowOpen("user")?n("window-user"):t._e(),t._v(" "),t.isWindowOpen("user-email")?n("window-user-email"):t._e(),t._v(" "),t.isWindowOpen("user-favorites")?n("window-user-favorites"):t._e(),t._v(" "),t.isWindowOpen("user-login")?n("window-user-login"):t._e(),t._v(" "),t.isWindowOpen("user-password")?n("window-user-password"):t._e(),t._v(" "),t.isWindowOpen("user-register")?n("window-user-register"):t._e(),t._v(" "),t.isWindowOpen("user-reset")?n("window-user-reset"):t._e(),t._v(" "),n("win-news-loader"),t._v(" "),n("win-song-info"),t._v(" "),n("win-alerts"),t._v(" "),t.loading?t._e():n("win-taskbar")],1)}),[],!1,null,null,null).exports}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[374,170,898],(function(){return e(4688),e(439),e(1441)}));t.O()}]);